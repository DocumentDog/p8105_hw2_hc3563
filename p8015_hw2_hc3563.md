p8105_hw2_hc3563
================
Hanchuan Chen
2024-10-01

Let’s start with implementing library:

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

### Problem 1

``` r
subway_df =
  read_csv(file='./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv', na=c("NA",".","")) |>  
  janitor::clean_names() |> 
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) |> 
  mutate(entry = if_else(entry == "Yes", TRUE, FALSE)) |> 
  drop_na(line, station_name, station_longitude, station_latitude, entry, vending, entrance_type, ada)
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

So far I have read and cleaned the dataset. First I imported the dataset
and clean the column names. Then I subset the columns I want to keep;
finally I change the value in “entry” column from “Yes/No” to
“TRUE/FALSE” and dropped all columns except routes since not all
stations have 11 lines. Now the dataset the clean enough and has 1868
rows and 19 columns.

``` r
#distinct station
distinct_station = subway_df |> distinct(line, station_name)
n_distinct = nrow(distinct_station)

#ADA compliant
ada_compliant = subway_df |> filter(ada == TRUE)
n_ada = nrow(ada_compliant)

#vending
vending_yes = subway_df |> filter(vending == "YES")
prop_vending = nrow(vending_yes) / nrow(subway_df)

#distinct station that serve A train
A_train = 
  subway_df |> 
  distinct(line, station_name, route1) |> 
  filter(route1 == 'A')
n_a_train = nrow(A_train)

#ADA compliant among A train serving
ada_and_A = 
  subway_df |> 
  distinct(line, station_name, route1, ada) |> 
  filter(route1 == 'A' & ada == TRUE)
n_ada_and_A = nrow(ada_and_A)
```

Using the data, we can see there are 465 distinct stations, 468 stations
are ADA compliant, and about 0.9020343 of station entrance have vending
machines. Among these distinct stations, there are 60 stations serve A
train. Among stations which serve A train, there are 17 stations are ADA
compliant.
